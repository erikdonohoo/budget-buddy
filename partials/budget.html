<div class="hidden-sm hidden-xs">
	<div class="col-sm-offset-2 col-sm-3">
		<button ng-click="show = 'budgets'" class="btn btn-default btn-lg" ng-class="{active: show == 'budgets'}">Budgets</button>
	</div>
	<div class="col-sm-offset-3 col-sm-3">
		<button ng-click="show = 'expenses'" class="btn btn-default btn-lg" ng-class="{active: show == 'expenses'}">Expenses</button>
	</div>
</div>
<div class="visible-sm visible-xs">
	<button ng-click="show = 'budgets'" class="btn btn-default btn-lg pull-left" ng-class="{active: show == 'budgets'}">Budgets</button>
	<button ng-click="show = 'expenses'" class="btn btn-default btn-lg pull-right" ng-class="{active: show == 'expenses'}">Expenses</button>
	<div class="clearfix"></div>
</div>
<div class="clearfix"></div>
<hr>
<div ng-if="show == 'budgets'">
	<div class="col-sm-6 budgets">
		<div>
			<div class="form-group">
				<button class="btn btn-primary" ng-click="addBudget()">+ Add Budget</button>
				<button class="btn btn-info" ng-click="addCategory()">+ Add Category</button>
			</div>
			<div class="col-sm-3" ng-if="loading">
				<img src="img/loading.gif" class="loading" />
			</div>
		</div>
		<div class="clearfix"></div>
		<div ng-if="newCategory">
			<div class="form-group">
				<input type="text" class="form-control" ng-model="newCategory.title" placeholder="Category name" />
			</div>
			<div class="form-group">
				<button class="btn btn-primary" ng-click="saveCategory()" ng-disabled="!newCategory.title">Save</button>
				<button class="btn btn-warning" ng-click="cancelCategory()">Cancel</button>
			</div>
		</div>
		<hr>
		<div>
			<h3 class="top">Income: {{month.totalIncome | currency}}</h3>
			<h3 class="top">Carryover: {{incomeLastMonth - spentLastMonth | currency}}</h3>
			<h3 class="top">Budgeted: {{month.totalBudgeted | currency}}</h3>
			<h3 class="top">Remaining: {{month.totalIncome + (incomeLastMonth - spentLastMonth) - month.totalBudgeted | currency}}</h3>
			<h3 class="top">Spendable: {{month.totalIncome + (incomeLastMonth - spentLastMonth) - month.totalSpent | currency}}</h3>
		</div>
	</div>
	<div class="budgets col-sm-6">
		<div class="budget new" ng-if="newBudget">
			<div class="holder">
				<div class="col-sm-12 inputs">
					<div class="form-group">
						<div class="input-group">
							<span class="input-group-addon">$</span>
							<input type="number" class="form-control" ng-model="newBudget.amount" placeholder="Amount" />
						</div>
					</div>
					<div class="form-group">
						<select ng-options="category.title for category in (categories | budgetFilter:budgets) | orderBy:'title'" ng-model="newBudget.category" class="form-control">
							<option value="" style="display:none;">--Choose Category--</option>
						</select>
					</div>
					<div class="form-group">
						<button class="btn btn-primary" ng-click="saveBudget()" ng-disabled="!newBudget.category.title || !newBudget.amount">Save</button>
						<button class="btn btn-danger" ng-click="cancelNewBudget()">Cancel</button>
					</div>
				</div>
			</div>
		</div>
		<div ng-repeat="budget in budgets | orderBy:'amount':true track by budget.objectId" class="budget" ng-swipe-left="editBudget(budget)">
			<div class="holder">
				<div class="budget-spent" style="width:{{budget.amountSpent}}%;" ng-class="{green: budget.amountSpent < 75, yellow: budget.amountSpent >=75 && budget.amountSpent < 100, red: budget.amountSpent > 100, blue: budget.amountSpent == 100}"></div>
				<strong class="pull-left category">{{budget.category | categoryFilter:categories}}</strong>				
				<strong class="pull-right hidden-sm hidden-xs">&nbsp;<span class="glyphicon glyphicon-cog clickable" ng-click="editBudget(budget)"></span>&nbsp;<span class="glyphicon glyphicon-trash clickable" ng-click="deleteBudget(budget)"></span></strong>
				<strong class="pull-right"><span class="hidden-sm hidden-xs">{{budget.amount - budget.totalSpent | currency}} of {{budget.amount | currency}}</span><span class="visible-sm visible-xs">{{budget.amount - budget.totalSpent | currency}}</span></strong>
			</div>
			<div ng-if="budget.edit" class="edit">
				<div class="form-group">
					<input type="number" ng-model="budgetCopy.amount" class="form-control" />
				</div>
				<div class="form-group">
					<button ng-click="updateBudget(budget)" class="btn btn-success">Update</button>
					<button ng-click="budget.edit = false" class="btn btn-warning">Cancel</button>
					<button ng-click="deleteBudget(budget)" class="mobile-delete btn btn-danger visible-sm visible-xs"><span class="glyphicon glyphicon-trash"></span></button>
				</div>
			</div>
		</div>
	</div>
</div>
<div ng-if="show == 'expenses'">
	<div class="col-sm-8 expenses-hold">
		<h3>Expenses</h3>
		<div class="col-sm-12">
			<div class="col-sm-8 form-group">
				<input type="text" placeholder="search" class="form-control" ng-model="search" />
			</div>
			<div class="form-group col-sm-2">
				<button class="btn btn-primary" ng-click="addExpense()">+ Add Expense</button>
			</div>
		</div>
		<div class="clearfix"></div>
		<div class="expense new well" ng-if="newExpense">
			<div class="form-group">
				<input type="text" ng-model="newExpense.description" class="form-control" placeholder="Description" />
			</div>
			<div class="form-group">
				<input type="number" ng-model="newExpense.amount" class="form-control" placeholder="Amount" />
			</div>
			<div class="form-group">
				<input type="date" min="{{firstDayOfMonth(now) | date:'yyyy-MM-dd'}}" max="{{lastDayOfMonth(now) | date:'yyyy-MM-dd'}}" ng-model="newExpense.fakeDate" ng-change="fixDate(newExpense)" class="form-control" placeholder="Date" />
			</div>
			<div class="form-group">
				<select ng-options="category.title for category in categories | orderBy:'title'" ng-model="newExpense.category" class="form-control">
					<option value="" style="display:none;">--Choose Category--</option>
				</select>
			</div>
			<div class="form-group">
				<button class="btn btn-primary" ng-disabled="!newExpense.description || !newExpense.amount || !newExpense.date || !newExpense.category.title" ng-click="saveExpense()">Save</button>
				<button class="btn btn-danger" ng-click="cancelExpense()">Cancel</button>
			</div>
		</div>
		<div class="clearfix"></div>
		<hr>
		<h3>Total Spent: {{totalExpenses((expenses | objectFilter:search)) | currency}}</h3>
		<div class="expense" ng-repeat="expense in expenses | objectFilter:search | orderBy:'date.iso':true track by expense.objectId" ng-swipe-left="deleteExpense(expense)">
			<strong class="col-sm-2">{{expense.amount | currency}}</strong>
			<span class="col-sm-4 hidden-sm hidden-xs">{{expense.description}}</span>
			<span class="col-sm-6">
				<span class="col-sm-5">{{expense.date.iso | date:'shortDate'}}</span> <br class="visible-sm visible-xs"><span class="col-sm-5">{{expense.category | categoryFilter:categories}}</span>
				<span class="clickable glyphicon glyphicon-trash hidden-sm hidden-xs col-sm-2" ng-click="deleteExpense(expense)"></span>
			</span>
			<div class="clearfix"></div>
			<hr>
		</div>
	</div>
	<div class="col-sm-4 expenses-hold">
		<h3>Income <small class="pull-right" ng-click="addIncome()"><button class="btn btn-link">+ Add Income</button></small></h3>
		<div class="well" ng-if="newIncome">
			<div class="form-group">
				<input type="text" ng-model="newIncome.description" class="form-control" placeholder="Description" />
			</div>
			<div class="form-group">
				<input type="number" ng-model="newIncome.amount" class="form-control" placeholder="Amount" />
			</div>
			<div class="form-group">
				<input type="date" min="{{firstDayOfMonth(now) | date:'yyyy-MM-dd'}}" max="{{lastDayOfMonth(now) | date:'yyyy-MM-dd'}}" ng-model="newIncome.fakeDate" class="form-control" ng-change="fixDate(newIncome)" placeholder="Date" />
			</div>
			<div class="form-group">
				<button class="btn btn-primary" ng-disabled="!newIncome.description || !newIncome.amount || !newIncome.fakeDate" ng-click="saveIncome()">Save</button>
				<button class="btn btn-danger" ng-click="cancelIncome()">Cancel</button>
			</div>
		</div>
		<div>
			<div class="income" ng-repeat="income in incomes">
				<strong class="col-sm-3">{{income.amount | currency}}</strong>
				<strong class="col-sm-offset-2 col-sm-7">{{income.date.iso | date:'shortDate'}}<span ng-click="deleteIncome(income)" class="close">&times;</span></strong>
				<hr>
				<div class="clearfix"></div>
			</div>
		</div>
		<div class="spacer"></div>
	</div>
</div>