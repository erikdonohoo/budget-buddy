<div class="container">
	<div class="col-sm-offset-2 col-sm-3">
		<button ng-click="show = 'budgets'" class="btn btn-default btn-lg" ng-class="{active: show == 'budgets'}">Budgets</button>
	</div>
	<div class="col-sm-offset-3 col-sm-3">
		<button ng-click="show = 'expenses'" class="btn btn-default btn-lg" ng-class="{active: show == 'expenses'}">Expenses</button>
	</div>
</div>
<hr>
<div class="container" ng-if="show == 'budgets'">
	<div class="budgets col-sm-6">
		<div class="budget new" ng-if="newBudget">
			<div class="holder">
				<div class="col-sm-12 inputs">
					<div class="col-sm-6 input input-group">
						<span class="input-group-addon">$</span>
						<input type="number" class="form-control" ng-model="newBudget.amount" placeholder="Amount" />
					</div>
					<div class="col-sm-6 select">
						<select ng-options="category.title for category in (categories | budgetFilter:budgets)" ng-model="newBudget.category" class="col-sm-offset-1 col-sm-5 form-control">
							<option value="" style="display:none;">--Choose Category--</option>
						</select>
					</div>
				</div>
				<div class="col-sm-12 inputs">
					<button class="btn btn-primary col-sm-3" ng-click="saveBudget()" ng-disabled="!newBudget.category.title || !newBudget.amount">Save</button>
					<button class="btn btn-danger col-sm-offset-1 col-sm-3" ng-click="cancelNewBudget()">Cancel</button>
				</div>
			</div>
		</div>
		<div ng-repeat="budget in budgets | orderBy:'updatedAt':true track by budget.objectId" class="budget">
			<div class="holder">
				<div class="budget-spent" style="width:{{budget.amountSpent}}%;" ng-class="{green: budget.amountSpent < 75, yellow: budget.amountSpent >=75 && budget.amountSpent < 100, red: budget.amountSpent == 100}"></div>
				<strong class="pull-left">{{budget.category | categoryFilter}}</strong>				
				<strong class="pull-right">&nbsp;<span class="glyphicon glyphicon-cog clickable" ng-click="budget.edit = true"></span>&nbsp;<span class="glyphicon glyphicon-trash clickable" ng-click="deleteBudget(budget)"></span></strong>
				<strong class="pull-right">{{budget.totalSpent | currency}} of {{budget.amount | currency}}</strong>
			</div>
			<div ng-if="budget.edit" class="edit">
				<div class="col-sm-6">
					<input type="number" ng-model="budget.amount" class="form-control" />
				</div>
				<button ng-click="updateBudget(budget)" class="btn btn-success col-sm-2">Update</button>
				<button ng-click="budget.edit = false" class="btn btn-danger col-sm-offset-1 col-sm-2">Cancel</button>
			</div>
		</div>
	</div>
	<div class="col-sm-6 budgets">
		<div class="container">
			<button class="btn btn-primary col-sm-2" ng-click="addBudget()">+ Add Budget</button>
			<div class="col-sm-2" ng-if="loading">
				<img src="img/loading.gif" class="loading" />
			</div>
		</div>
		<hr>
		<div class="col-sm-12">
			<h3 class="top">Income: {{month.totalIncome | currency}}</h3>
			<h3 class="top">Budgeted: {{month.totalBudgeted | currency}}</h3>
			<h3 class="top">Remaining: {{month.totalIncome - month.totalBudgeted | currency}}</h3>
			<h3 class="top">Spendable: {{month.totalIncome - month.totalSpent | currency}}</h3>
		</div>
	</div>
</div>
<div class="container" ng-if="show == 'expenses'">
	<div class="col-sm-8 expenses">
		<h3>Expenses</h3>
		<div class="col-sm-12">
			<div class="col-sm-8">
				<input type="text" placeholder="search" class="form-control" ng-model="search" />
			</div>
			<button class="col-sm-offset1 col-sm-2 btn btn-primary" ng-click="addExpense()">+ Add Expense</button>
		</div>
		<div class="clearfix"></div>
		<div class="expense new well" ng-if="newExpense">
			<div class="col-sm-12">
				<div class="col-sm-5">
					<input type="text" ng-model="newExpense.description" class="form-control" placeholder="Description" />
				</div>
				<div class="col-sm-3">
					<input type="number" ng-model="newExpense.amount" class="form-control" placeholder="Amount" />
				</div>
				<div class="col-sm-4">
					<input type="date" ng-model="newExpense.fakeDate" ng-change="fixDate(newExpense)" class="form-control" placeholder="Date" />
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="col-sm-12">
				<div class="col-sm-4">
					<select ng-options="category.title for category in categories | orderBy:'title'" ng-model="newExpense.category" class="form-control">
						<option value="" style="display:none;">--Choose Category--</option>
					</select>
				</div>
				<button class="btn btn-primary" ng-disabled="!newExpense.description || !newExpense.amount || !newExpense.date || !newExpense.category.title" ng-click="saveExpense()">Save</button>
				<button class="btn btn-danger" ng-click="cancelExpense()">Cancel</button>
			</div>
		</div>
		<div class="clearfix"></div>
		<hr>
		<div class="expense" ng-repeat="expense in expenses | objectFilter:search | orderBy:'date.iso':true track by expense.objectId">
			<h4>{{expense.amount | currency}} <small>{{expense.description}}</small><strong class="pull-right"><span class="clickable glyphicon glyphicon-trash" ng-click="deleteExpense(expense)"></span> &nbsp;&nbsp; {{expense.date.iso | date:'mediumDate'}} &nbsp;&nbsp; {{expense.category | categoryFilter}}</strong></h4>
			<hr>
		</div>
	</div>
</div>